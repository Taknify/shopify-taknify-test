var SMI_ProductCard=class t{options={card:".smi-product-card",thumbnail:".smi-product-card__thumbnail",variants:{wrapper:".smi-variants",item:".smi-variants__item"}};constructor(t={}){this.options={...this.options,...t},this.handleVariantClick(),this.handleAddToCart()}handleVariantClick(){let t=document.querySelectorAll(this.options.variants.wrapper),e=this.options.variants.item.replace(".","")+"--active";t.forEach(t=>{let i=t.querySelectorAll(this.options.variants.item);i.forEach(i=>{i.addEventListener("click",r=>{let s=t.querySelector(`${this.options.variants.item}.${e}`);s&&s.classList.remove(e),i.classList.add(e);let a=i.dataset.mediaUrl;if(a){let n=t.closest(this.options.card),o=n.querySelector(`${this.options.thumbnail} img:nth-child(1)`);o&&(o.removeAttribute("srcset"),o.setAttribute("src",a))}let c=i.getAttribute("data-id");if(c){let l=i.closest(".smi-product-card"),d=l.querySelectorAll("a");d.length&&d.forEach(t=>{let e=t.getAttribute("href"),i=e.split("?")[0];t.setAttribute("href",`${i}?variant=${c}`)})}})})})}handleAddToCart(){let t=document.querySelectorAll(".smi-button-cart._cart_now a");t.length&&t.forEach(t=>{t.addEventListener("click",e=>{e.preventDefault();let i=document.querySelector("cart-notification")||document.querySelector("cart-drawer"),r=t.getAttribute("data-id");t.classList.add("smi-cart-adding");let s=t.getAttribute("data-text-add-cart"),a=t.getAttribute("data-text-added"),n=t.getAttribute("data-text-failed"),o=t.querySelector(".smi-cart-text"),c=this.getSectionsToRender().map(t=>t.section);if(i)try{let l=i.getSectionsToRender().map(t=>t.id);c=[...c,...l]}catch(d){}let u={quantity:1,id:parseInt(r),sections:c,sections_url:window.location.pathname};fetch("/cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}).then(t=>t.json()).then(t=>{let e=!1;t?.status==422||t?.message==="Cart Error"?(e=!0,o.innerText=n):o.innerText=a;let r=setTimeout(()=>{o.innerText=s,clearTimeout(r)},2e3);if(!e){let c=this.getSectionsToRender();c.forEach(e=>{let i=document.getElementById(e.id);if(i){let r=i.querySelector(e.selector),s=null;(s=r||i)&&(s.innerHTML=this.getSectionInnerHTML(t.sections[e.section],e.selector),"function"==typeof SMI_CartDrawer?setTimeout(()=>{document.dispatchEvent(new CustomEvent("smiCartDrawerRender"));let t=document.querySelector("#smi-cart-button .smi-cart-badges");if(t){let e=t.innerText;document.dispatchEvent(new CustomEvent("smiCartCounter",{data:e}))}},150):window.location.href=window.smiObject.routes.cart_url)}}),i?"function"==typeof i.renderContents&&i.renderContents(t):"function"!=typeof SMI_CartDrawer&&window.smiObject&&(window.location.href=window.smiObject.routes.cart_url)}}).finally(()=>{t.classList.remove("smi-cart-adding"),i&&i.classList.contains("is-empty")&&i.classList.remove("is-empty")})})})}getSectionsToRender(){let t=document.getElementById("smi-drawer-items"),e=[{id:"smi-cart-button",section:"smi-cart-icon-bubble",selector:".shopify-section"}];return t&&e.push({id:"shopify-section-"+t.dataset.id,section:t.dataset.id,selector:".smi-drawer-items_w"}),e}getSectionInnerHTML(t,e){return new DOMParser().parseFromString(t,"text/html").querySelector(e).innerHTML}};Shopify.designMode?new SMI_ProductCard:window.addEventListener("DOMContentLoaded",t=>{new SMI_ProductCard});